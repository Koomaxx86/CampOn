<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{/UI/user/layout/main_layout}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CampOn(캠프온)</title>
</head>

<body layout:fragment="content">

    <div class="d-flex justify-content-left mt-4 mb-3">
        <h3>렌탈샵 상품 수정</h3>
    </div>

    
    <!-- 상품 수정 화면 -->
    <div class="container">
        <form name="product" action="/product/productUpdate" method="post" enctype="multipart/form-data" th:object="${product}">
            <!-- csrf -->
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <!--상품 번호-->
            <input type="hidden" th:field="*{productNo}">
            <!-- 상품이름 -->
            <div class="input-group mb-3 r ow border-bottom">
                <label class="col-md-4 col-form-label" for="">상품 이름</label>
                <input type="text" class="form-control" th:field="*{productName}" >
            </div>


            <!-- 썸네일 업로드 -->
            <div class="input-group mb-3 row border-bottom" style="margin-top: 40px;">
                <label class="col-md-4 col-form-label" for="">상품 썸네일</label>
                <input type="file" class="form-control" th:field="*{productThmFile}" >
                <img th:src=" '/product/img?file=' + *{productThumnail} " alt="썸네일이미지">
            </div>


            <!-- 카테고리 -->
            <div class="input-group mb-3 row border-bottom" style="margin-top: 40px;">
                <label class="col-md-4 col-form-label" for="">카테고리</label>
                <div class="col-md-8">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="productCategory" id="tent" value="텐트">
                        <label class="form-check-label" for="tent">텐트</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="productCategory" id="table" value="테이블">
                        <label class="form-check-label" for="table">테이블</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="productCategory" id="chair" value="체어">
                        <label class="form-check-label" for="chair">체어</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="productCategory" id="mat" value="매트">
                        <label class="form-check-label" for="mat">매트</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="productCategory" id="lighting" value="조명">
                        <label class="form-check-label" for="lighting">조명</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="productCategory" id="brazier" value="화로대">
                        <label class="form-check-label" for="brazier">화로대</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="productCategory" id="tarp" value="타프">
                        <label class="form-check-label" for="tarp">타프</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="productCategory" id="storage" value="수납">
                        <label class="form-check-label" for="storage">수납</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="productCategory" id="appliances" value="캠핑가전">
                        <label class="form-check-label" for="appliances">캠핑가전</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="productCategory" id="Kitchenware"  value="주방용품">
                        <label class="form-check-label" for="Kitchenware">주방용품</label>
                    </div>
                </div>
            </div>


            <!-- 1일 대여금액 -->
            <div class="input-group mb-3 row border-bottom" style="margin-top: 40px;">
                <label class="col-md-4 col-form-label" for="">1일 대여금액</label>
                <input type="text" class="form-control" style="background-color:#F9F9F9; border-width: 0;"
                    name="productPrice" id="productPrice" th:field="*{productPrice}">
            </div>


            <!-- 상품 기본내용 -->
            <div class="input-group mb-3 row border-bottom" style="margin-top: 40px;">
                <label class="col-md-4 col-form-label" for="">상품 기본내용</label>
                <input type="text" class="form-control" style="background-color:#F9F9F9; border-width: 0;" th:field="*{productIntro}">
            </div>

            <!-- 상품 상세내용(이미지) -->
            <div class="input-group mb-3 row border-bottom" style="margin-top: 40px;">
                <label class="col-md-4 col-form-label" for="">상품 상세설명(이미지)</label>
                <input type="file" class="form-control" name="productConFile" id="productConFile">
                <img th:src=" '/product/img?file=' + *{productCon} " alt="상세설명">

            </div>

            <!-- 여러이미지 업로드 -->
            <div class="input-group mb-3 row border-bottom" style="margin-top: 40px;">
                <label class="col-md-4 col-form-label" for="">상품 이미지(여러장)</label>
                <input type="file" class="form-control" name="productImgs" id="productImgs"  multiple>
                <th:block th:each="productImg : *{productImgs}">
                <img th:src=" '/product/img?file=' + *{productImg} " alt="상세이미지(여러장)">
                </th:block>
            </div>


            <!-- 상품수정 -->
            <div class="d-flex justify-content-center mt-5 mb-5">
                <input type="submit" class="btn btn-lg btn btn-dark" value="상품수정" style="width:80%; height:70px;" />
            </div>
        </form>

        <!-- 상품 삭제-->
        <a href="|/product/delete?productNo=${product.productNo}|">상품 삭제</a>
    </div>


    <script>
        let productCategory = "[[${product.productCategory}]]"
        function selectRadioByValue(value) {
        let radioButtons = document.getElementsByName("productCategory");
        for (var i = 0; i < radioButtons.length; i++) {
            if (radioButtons[i].value === value) {
                radioButtons[i].checked = true;
                break;
            }
        }
    }
    selectRadioByValue(productCategory);
    </script>
</body>

</html>